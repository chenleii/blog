"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[602],{16587:function(e,t,n){n.r(t);var r=n(17061),a=n.n(r),i=n(42122),c=n.n(i),o=n(17156),s=n.n(o),u=n(27424),l=n.n(u),f=n(25899),d=n(91894),v=n(16579),m=n(19650),p=n(51890),g=n(4107),h=n(71577),x=n(89842),Z=n(67294),w=n(81264),b=n(30321),C=n(85893);t.default=function(){var e=(0,w.useModel)("@@initialState"),t=e.initialState,n=e.setInitialState,r=(0,Z.useState)(!1),i=l()(r,2),o=i[0],u=i[1],y=(0,Z.useState)({}),E=l()(y,2),j=E[0],M=E[1],k=(0,w.useIntl)(),N=function(){var e=s()(a()().mark((function e(r){var i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,b.Z.accountApi.update1(c()({},r));case 4:return e.next=6,b.Z.accountApi.getLoggedInAccount();case 6:i=e.sent,n(c()(c()({},t),{},{loggedInAccount:i}));case 8:return e.prev=8,u(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,,8,11]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=s()(a()().mark((function e(){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.Z.accountApi.getLoggedInAccount();case 3:t=e.sent,M(t);case 5:return e.prev=5,u(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[0,,5,8]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.useEffect)((function(){u(!0),T()}),[]),(0,C.jsxs)(f._z,{header:{title:""},children:[(0,C.jsx)(d.Z,{bordered:!1,style:{marginBottom:24},loading:o,children:(0,C.jsxs)(v.Z,{name:"basic",layout:"vertical",labelCol:{span:24},wrapperCol:{span:24},initialValues:c()({},j),onFinish:function(e){return N(e)},onValuesChange:function(e,t){var n=c()(c()({},j),t);M(n)},autoComplete:"off",children:[(0,C.jsx)(v.Z.Item,{label:k.formatMessage({id:"pages.account.update.avatar",defaultMessage:"头像"}),name:"avatar",rules:[{required:!0}],children:(0,C.jsxs)(m.Z,{direction:"vertical",align:"center",style:{width:"100%"},children:[(0,C.jsx)(p.C,{src:null==j?void 0:j.avatar,alt:"",size:128}),(0,C.jsx)(g.Z,{value:null==j?void 0:j.avatar})]})}),(0,C.jsx)(v.Z.Item,{label:k.formatMessage({id:"pages.account.update.name",defaultMessage:"昵称"}),name:"name",rules:[{required:!0}],children:(0,C.jsx)(g.Z,{})}),(0,C.jsx)(v.Z.Item,{label:k.formatMessage({id:"pages.account.update.introduction",defaultMessage:"个人简介"}),name:"introduction",rules:[{required:!0}],children:(0,C.jsx)(g.Z,{})}),(0,C.jsx)(v.Z.Item,{wrapperCol:{offset:0,span:24},children:(0,C.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:o,children:k.formatMessage({id:"pages.ArticleEditor.submitButton",defaultMessage:"保存"})})})]})}),(0,C.jsx)(x.Z,{})]})}},89842:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(87462),a=n(4942),i=n(29439),c=n(1413),o=n(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},u=n(27029),l=function(e,t){return o.createElement(u.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:s}))};l.displayName="VerticalAlignTopOutlined";var f=o.forwardRef(l),d=n(94184),v=n.n(d),m=n(63441),p=n(64019),g=n(21770),h=n(98423),x=n(53124);function Z(e){return null!=e&&e===e.window}function w(e,t){var n,r;if("undefined"==typeof window)return 0;var a=t?"scrollTop":"scrollLeft",i=0;return Z(e)?i=e[t?"pageYOffset":"pageXOffset"]:e instanceof Document?i=e.documentElement[a]:(e instanceof HTMLElement||e)&&(i=e[a]),e&&!Z(e)&&"number"!=typeof i&&(i=null===(r=(null!==(n=e.ownerDocument)&&void 0!==n?n:e).documentElement)||void 0===r?void 0:r[a]),i}var b=n(96159),C=n(75164);function y(e,t,n,r){var a=n-t;return(e/=r/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t}var E=n(48783),j=function(e){var t=e.prefixCls,n=e.rootPrefixCls,r=e.children,a=e.visible,i=o.createElement("div",{className:"".concat(t,"-content")},o.createElement("div",{className:"".concat(t,"-icon")},o.createElement(f,null)));return o.createElement(m.Z,{visible:a,motionName:"".concat(n,"-fade")},(function(e){var t=e.className;return(0,b.Tm)(r||i,(function(e){var n=e.className;return{className:v()(t,n)}}))}))},M=function(e){var t=(0,g.Z)(!1,{value:e.visible}),n=(0,i.Z)(t,2),c=n[0],s=n[1],u=o.createRef(),l=o.useRef(),f=function(){return u.current&&u.current.ownerDocument?u.current.ownerDocument:window},d=(0,E.t)((function(t){var n=e.visibilityHeight,r=w(t.target,!0);s(r>n)}));o.useEffect((function(){var t;return t=(e.target||f)(),l.current=(0,p.Z)(t,"scroll",(function(e){d(e)})),d({target:t}),function(){l.current&&l.current.remove(),d.cancel()}}),[e.target]);var m=o.useContext(x.E_),b=m.getPrefixCls,M=m.direction,k=e.prefixCls,N=e.className,T=void 0===N?"":N,I=b("back-top",k),A=b(),D=v()(I,(0,a.Z)({},"".concat(I,"-rtl"),"rtl"===M),T),H=(0,h.Z)(e,["prefixCls","className","children","visibilityHeight","target","visible"]);return o.createElement("div",(0,r.Z)({},H,{className:D,onClick:function(t){var n=e.onClick,r=e.target,a=e.duration;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getContainer,r=void 0===n?function(){return window}:n,a=t.callback,i=t.duration,c=void 0===i?450:i,o=r(),s=w(o,!0),u=Date.now(),l=function t(){var n=Date.now()-u,r=y(n>c?c:n,s,e,c);Z(o)?o.scrollTo(window.pageXOffset,r):o instanceof HTMLDocument||"HTMLDocument"===o.constructor.name?o.documentElement.scrollTop=r:o.scrollTop=r,n<c?(0,C.Z)(t):"function"==typeof a&&a()};(0,C.Z)(l)}(0,{getContainer:r||f,duration:void 0===a?450:a}),"function"==typeof n&&n(t)},ref:u}),o.createElement(j,{prefixCls:I,rootPrefixCls:A,visible:c},e.children))};M.defaultProps={visibilityHeight:400};var k=o.memo(M)}}]);