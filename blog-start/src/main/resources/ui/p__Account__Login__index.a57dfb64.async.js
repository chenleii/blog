"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[423],{8426:function(e,a,n){n.r(a),n.d(a,{default:function(){return _}});var s=n(17061),t=n.n(s),r=n(42122),i=n.n(r),o=n(17156),c=n.n(o),l=n(21380),u=n(30321),g=n(80521),d=n(2603),f=n(86281),p=n(5966),h=n(16434),m=n(63434),x=n(81264),v=n(48086),M=(n(67294),{container:"container___fnk86",lang:"lang___XrQiJ",content:"content___AGMcd",icon:"icon___KDFCy"}),j=n(85893),_=function(){var e=(0,x.useModel)("@@initialState"),a=e.initialState,n=e.setInitialState,s=(0,x.useIntl)(),r=function(){var e=c()(t()().mark((function e(){var s,r;return t()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==a||null===(s=a.fetchLoggedInAccount)||void 0===s?void 0:s.call(a);case 2:if(!(r=e.sent)){e.next=6;break}return e.next=6,n((function(e){return i()(i()({},e),{},{isLoggedIn:!0,loggedInAccount:r})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=c()(t()().mark((function e(a){var n,i,o;return t()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.accountApi.login({phoneNo:a.phoneNo,verificationCode:a.verificationCode});case 3:return n=s.formatMessage({id:"pages.login.success",defaultMessage:"登录成功！"}),v.ZP.success(n),e.next=7,r();case 7:i=new URL(window.location.href).searchParams,x.history.push(i.get("redirect")||"/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),o=s.formatMessage({id:"pages.login.failure",defaultMessage:"登录失败，请重试！"}),v.ZP.error(o);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:M.container,children:[(0,j.jsx)("div",{className:M.lang,"data-lang":!0,children:x.SelectLang&&(0,j.jsx)(x.SelectLang,{})}),(0,j.jsx)("div",{className:M.content,children:(0,j.jsxs)(f.U,{logo:(0,j.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:s.formatMessage({id:"pages.layouts.userLayout.title"}),subTitle:" ",initialValues:{},actions:[],onFinish:function(){var e=c()(t()().mark((function e(a){return t()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),children:[(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.Z,{fieldProps:{size:"large",prefix:(0,j.jsx)(g.Z,{className:M.prefixIcon})},name:"phoneNo",placeholder:s.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"手机号"}),rules:[{required:!0,message:(0,j.jsx)("div",{children:s.formatMessage({id:"pages.login.phoneNumber.required",defaultMessage:"请输入手机号！"})})},{pattern:/^1\d{10}$/,message:(0,j.jsx)("div",{children:s.formatMessage({id:"pages.login.phoneNumber.invalid",defaultMessage:"手机号格式错误！"})})}]}),(0,j.jsx)(h.Z,{fieldProps:{size:"large",prefix:(0,j.jsx)(d.Z,{className:M.prefixIcon})},captchaProps:{size:"large"},placeholder:s.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,a){return e?"".concat(a," ").concat(s.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):s.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},name:"verificationCode",rules:[{required:!0,message:(0,j.jsx)("div",{children:s.formatMessage({id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})})}],onGetCaptcha:function(){var e=c()(t()().mark((function e(a){var n;return t()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.formatMessage({id:"pages.login.captcha.getMessage",defaultMessage:"获取验证码成功！验证码为：123123"},{code:"123123"}),v.ZP.success(n);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]}),(0,j.jsxs)("div",{style:{marginBottom:24},children:[(0,j.jsx)(m.Z,{noStyle:!0,name:"autoLogin",children:s.formatMessage({id:"pages.login.rememberMe",defaultMessage:"自动登录"})}),(0,j.jsx)("a",{style:{float:"right"},children:s.formatMessage({id:"pages.login.forgotPassword",defaultMessage:"忘记密码"})})]})]})}),(0,j.jsx)(l.Z,{})]})}}}]);