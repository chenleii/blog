"use strict";(self.webpackChunkblog_ui=self.webpackChunkblog_ui||[]).push([[423],{58707:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var n=t(15009),s=t.n(n),r=t(97857),i=t.n(r),o=t(99289),c=t.n(o),l=t(66116),u=t(33423),d=t(1413),g=t(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},p=t(84089),h=function(e,a){return g.createElement(p.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:a,icon:f}))};h.displayName="MobileOutlined";var m=g.forwardRef(h),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},x=function(e,a){return g.createElement(p.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:a,icon:v}))};x.displayName="LockOutlined";var M=g.forwardRef(x),j=t(49693),w=t(57328),b=t(12461),_={container:"container___KqtO3",lang:"lang___ZsPRm",content:"content___vQddq",icon:"icon___zU1l_"},N=t(85893),k=function(){var e=(0,w.useModel)("@@initialState"),a=e.initialState,t=e.setInitialState,n=(0,w.useIntl)(),r=function(){var e=c()(s()().mark((function e(){var n,r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==a||null===(n=a.fetchLoggedInAccount)||void 0===n?void 0:n.call(a);case 2:if(!(r=e.sent)){e.next=6;break}return e.next=6,t((function(e){return i()(i()({},e),{},{isLoggedIn:!0,loggedInAccount:r})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=c()(s()().mark((function e(a){var t,i,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.accountApi.login({phoneNo:a.phoneNo,verificationCode:a.verificationCode});case 3:return t=n.formatMessage({id:"pages.login.success",defaultMessage:"登录成功！"}),b.ZP.success(t),e.next=7,r();case 7:i=new URL(window.location.href).searchParams,w.history.push(i.get("redirect")||"/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),o=n.formatMessage({id:"pages.login.failure",defaultMessage:"登录失败，请重试！"}),b.ZP.error(o);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}();return(0,N.jsxs)("div",{className:_.container,children:[(0,N.jsx)("div",{className:_.lang,"data-lang":!0,children:w.SelectLang&&(0,N.jsx)(w.SelectLang,{})}),(0,N.jsx)("div",{className:_.content,children:(0,N.jsxs)(j.U0H,{logo:(0,N.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:n.formatMessage({id:"pages.layouts.userLayout.title"}),subTitle:" ",initialValues:{},actions:[],onFinish:function(){var e=c()(s()().mark((function e(a){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),children:[(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(j.VaQ,{fieldProps:{size:"large",prefix:(0,N.jsx)(m,{className:_.prefixIcon})},name:"phoneNo",placeholder:n.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"手机号"}),rules:[{required:!0,message:(0,N.jsx)("div",{children:n.formatMessage({id:"pages.login.phoneNumber.required",defaultMessage:"请输入手机号！"})})},{pattern:/^1\d{10}$/,message:(0,N.jsx)("div",{children:n.formatMessage({id:"pages.login.phoneNumber.invalid",defaultMessage:"手机号格式错误！"})})}]}),(0,N.jsx)(j.BXt,{fieldProps:{size:"large",prefix:(0,N.jsx)(M,{className:_.prefixIcon})},captchaProps:{size:"large"},placeholder:n.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,a){return e?"".concat(a," ").concat(n.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):n.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},name:"verificationCode",rules:[{required:!0,message:(0,N.jsx)("div",{children:n.formatMessage({id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})})}],onGetCaptcha:function(){var e=c()(s()().mark((function e(a){var t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.formatMessage({id:"pages.login.captcha.getMessage",defaultMessage:"获取验证码成功！验证码为：123123"},{code:"123123"}),b.ZP.success(t);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]}),(0,N.jsxs)("div",{style:{marginBottom:24},children:[(0,N.jsx)(j.V2E,{noStyle:!0,name:"autoLogin",children:n.formatMessage({id:"pages.login.rememberMe",defaultMessage:"自动登录"})}),(0,N.jsx)("a",{style:{float:"right"},children:n.formatMessage({id:"pages.login.forgotPassword",defaultMessage:"忘记密码"})})]})]})}),(0,N.jsx)(l.Z,{})]})}}}]);